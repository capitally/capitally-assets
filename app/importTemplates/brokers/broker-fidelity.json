{
  "version": 3,
  "type": "Capitally Data Export",
  "exportedAt": "2024-03-30T15:12:33.147Z",
  "data": {
    "importTemplates": {
      "u-broker-fidelity": {
        "id": "u-broker-fidelity",
        "name": "Fidelity",
        "author": "Capitally",
        "info": "To import your transactions from Fidelity:\n\n1. Login to your Fidelity Client Portal\n1. Choose **Account** → **Activity & Orders**\n1. Choose a time period\n1. Download transactions in CSV format with the green ↓ icon\n1. Open or drop that file here\n\nℹ️ Please note that dividends are not imported - they're generated by the app, but you will need to update their date and value manually if you need accuracy.\n",
        "logoUrl": "/static/brokers/fidelity.png",
        "group": "Brokers",
        "updatedAt": "2023-09-08",
        "parser": {
          "id": "csv",
          "allowPaste": false,
          "csv": {
            "replace": [
              [
                "/^Date downloaded.+$/gm",
                ""
              ],
              [
                "/^\".+\"$/gm",
                ""
              ]
            ],
            "skipUntil": "Run Date"
          }
        },
        "resolver": {
          "id": "transaction",
          "columns": {
            "$account": {
              "prop": "account",
              "mapping": {
                "type": "value",
                "value": {
                  "$template": "Fidelity",
                  "name": "Fidelity"
                }
              }
            },
            "Run Date": {
              "prop": "date"
            },
            "Action": null,
            "Symbol": {
              "prop": "asset",
              "mapping": {
                "type": "formula",
                "value": "=value + \".US\""
              }
            },
            "Security Description": {},
            "Quantity": {
              "prop": "qty"
            },
            "Price ( )": {
              "prop": "price"
            },
            "Amount ( )": {
              "prop": "value"
            },
            "$currency": {
              "prop": "currency",
              "mapping": {
                "type": "value",
                "value": {
                  "id": "c-USD"
                }
              }
            },
            "$type": {
              "prop": "type",
              "mapping": {
                "type": "formula",
                "value": "=regexMatch(col(\"Action\"), \"^\\\\s*(DIVIDEND RECEIVED|REINVESTMENT|INTEREST EARNED|ROLLOVER CASH|YOU BOUGHT|YOU SOLD)\") || (\"Unknown: \" + col(\"Action\"))"
              },
              "valueMap": {
                " DIVIDEND RECEIVED": null,
                " INTEREST EARNED": null,
                " REINVESTMENT": "OPEN",
                " ROLLOVER CASH": null,
                " YOU BOUGHT": "OPEN",
                " YOU SOLD": "CLOSE"
              }
            },
            "$notes": {
              "prop": "notes",
              "mapping": {
                "type": "formula",
                "value": "=col(\"Action\")"
              }
            }
          }
        },
        "generator": {
          "id": "transaction"
        }
      }
    }
  }
}